name: $SESSION_ID
digest: create

services:
   - name: dapp
     image_name: dapp_image
     mrenclaves: [$MRENCLAVE]
     tags: [demo]
     pwd: /
     command: $COMMAND
     fspf_path: /fspf.pb
     fspf_key: $FSPF_KEY
     fspf_tag: $FSPF_TAG
   - name: signing_enclave
     image_name: dapp_image
     mrenclaves: [$MRENCLAVE]
     tags: [demo]
     pwd: /
     command: python signer.py
     fspf_path: /fspf.pb
     fspf_key: $FSPF_KEY
     fspf_tag: $FSPF_TAG
     env:

images:
   - name: dapp_image
     mrenclaves: [$MRENCLAVE]
     tags: [demo]
     volumes:
        - name: data
          path: /data
        - name: output
          path: /output
        - name: iexec_enclave
          path: /iexec_enclave

volumes:
   - name: data
     fspf_tag: $DATA_FSPF_TAG
     fspf_key: $DATA_FSPF_KEY
   - name: output
     fspf_tag: $OUTPUT_FSPF_TAG
     fspf_key: $OUTPUT_FSPF_KEY
   - name: iexec_enclave
     fspf_tag: $IEXEC_ENCLAVE_FSPF_TAG
     fspf_key: $IEXEC_ENCLAVE_FSPF_KEY
